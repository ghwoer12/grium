<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ssafy.board">

	<insert id="insert" parameterType="BoardDTO">
		insert into BOARD_TB(GONE_ID,
		TITLE, WRITER, CONTENT, BOARD_DT, COUNT, SECRET, FLAG)
		values(#{GONE_ID},
		#{TITLE}, #{WRITER}, #{CONTENT},
		now(), 0, #{SECRET},
		0)
	</insert>

	<select id="checkchild" parameterType="map" resultType="GoneDTO">
		select *
		from GONE_TB where GONE_ID=#{gone_id} and USER_ID=#{user_id}
	</select>

	<select id="listall" parameterType="Pagination"
		resultType="GoneDTO">
		select *
		from BOARD_TB
		<if test="isOwner == 0">
			where SECRET=0 and FLAG=0
		</if>
		<if test="isOwner == 1">
			where FLAG=0
		</if>
		limit #{startList}, #{listSize}
	</select>

	<select id="getCnt" parameterType="int" resultType="int">
		select count(*) as listCnt
		from BOARD_TB
		<if test="isOwner == 0">
			where SECRET=0 and FLAG=0
		</if>
		<if test="isOwner == 1">
			where FLAG=0
		</if>
	</select>

	<select id="listpart" resultType="GoneDTO">
		select *
		from BOARD_TB where
		SECRET=0
	</select>

</mapper>